<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textos e Strings | The DevRoad</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body class="topic-page">
    <aside class="topic-sidebar">
        <a href="index.html" class="back-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            Voltar ao Início
        </a>
        <h2>Neste capítulo</h2>
        <div class="sidebar-item active" onclick="scrollToSection('intro-strings')">O que são Strings?</div>
        <div class="sidebar-item" onclick="scrollToSection('pool')">O Segredo do String Pool</div>
        <div class="sidebar-item" onclick="scrollToSection('imutabilidade')">Imutabilidade</div>
        <div class="sidebar-item" onclick="scrollToSection('builder')">StringBuilder</div>
    </aside>

    <main class="topic-main">
        <article class="lesson-content">
            <section id="intro-strings">
                <h1>Textos e a Classe String</h1>
                <p>Embora pareça um tipo de dado básico, em Java a <code>String</code> é um **Objeto**. Ela é uma
                    sequência de caracteres encapsulada em uma classe cheia de superpoderes.</p>

                <div class="callout">
                    <h4>Primitivo vs Objeto</h4>
                    <p>Enquanto um <code>int</code> guarda apenas o número, uma <code>String</code> traz consigo uma
                        mala cheia de ferramentas (métodos) para você transformar o texto, cortar, comparar e muito
                        mais.</p>
                </div>
            </section>

            <section id="pool">
                <h2>O Segredo do String Pool</h2>
                <p>Imagine que em um sistema grande você tenha a palavra "ADMIN" repetida 10.000 vezes. Se o Java
                    criasse 10.000 objetos iguais na memória, o sistema ficaria pesado.</p>
                <p>Para resolver isso, o Java usa o <strong>String Pool (Piscina de Strings)</strong>. É uma área
                    especial da memória onde o Java guarda apenas UMA cópia de cada texto que você cria usando aspas
                    duplas.</p>

                <pre><code>String s1 = "Java";
String s2 = "Java";
// s1 e s2 apontam para o MESMO lugar na memória!</code></pre>
            </section>

            <section id="imutabilidade">
                <h2>A Imutabilidade: Um Contrato Sagrado</h2>
                <p>Uma String em Java é **imutável**. Isso significa que, uma vez criada, seu valor nunca muda. Quando
                    você tenta "alterar" uma String, o Java na verdade joga a antiga fora e cria uma novinha em folha.
                </p>
                <pre><code>String nome = "Ana";
nome = nome + " Silva"; // "Ana" foi descartada, "Ana Silva" foi criada.</code></pre>

                <div class="callout" style="background: rgba(99, 102, 241, 0.1);">
                    <h4>Por que ser imutável?</h4>
                    <p>Segurança e Performance. Se várias partes do programa compartilham a mesma String "ADMIN" do
                        Pool, o Java precisa garantir que ninguém mude esse valor por acidente, estragando o acesso de
                        todos.</p>
                </div>
            </section>

            <section id="builder">
                <h2>StringBuilder: A Fábrica de Texto</h2>
                <p>Se você precisa montar um texto enorme (como um arquivo ou um log longo) dentro de um loop, usar
                    <code>String</code> normal vai criar milhares de objetos inúteis e deixar o app lento.
                </p>
                <p>Para esses casos, usamos o <strong><code>StringBuilder</code></strong>. Ele é uma "String mutável"
                    que permite que você altere o texto dentro dele sem criar objetos novos toda hora.</p>
                <pre><code>StringBuilder sb = new StringBuilder();
sb.append("Olá ");
sb.append("Mundo!");
String resultado = sb.toString(); // Só aqui o objeto final é criado</code></pre>
            </section>

            <div style="margin-top: 5rem; display: flex; justify-content: space-between; align-items: center;">
                <a href="2-variaveis-primitivos.html" class="back-btn">← Lição Anterior</a>
                <a href="4-operadores.html" class="lesson-card" style="padding: 1rem 2rem; margin: 0;">
                    Próxima Lição: Operadores →
                </a>
            </div>
        </article>
    </main>

    <script src="../../main.js"></script>
    <script>
        function scrollToSection(id) {
            const section = document.getElementById(id);
            const yOffset = -100;
            const y = section.getBoundingClientRect().top + window.pageYOffset + yOffset;
            window.scrollTo({ top: y, behavior: 'smooth' });
        }

        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section');
            const sidebarItems = document.querySelectorAll('.sidebar-item');

            let current = '';
            const scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
            const windowHeight = window.innerHeight;
            const bodyHeight = document.documentElement.scrollHeight;

            if (scrollPos + windowHeight >= bodyHeight - 50) {
                current = sections[sections.length - 1].getAttribute('id');
            } else {
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (scrollPos >= sectionTop - 150) {
                        current = section.getAttribute('id');
                    }
                });
            }

            sidebarItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('onclick').includes(`'${current}'`)) {
                    item.classList.add('active');
                }
            });
        });
    </script>
</body>

</html>